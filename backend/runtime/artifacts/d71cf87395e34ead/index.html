<!DOCTYPE html>
<html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"></head><body>
<script>
// Utility functions collection
const utils = {
  // Generate random number between min and max
  random: (min, max) => Math.floor(Math.random() * (max - min + 1)) + min,
  
  // Format currency
  formatCurrency: (amount) => new Intl.NumberFormat('en-US', {
    style: 'currency',
    currency: 'USD'
  }).format(amount),
  
  // Debounce function
  debounce: (func, delay) => {
    let timeout;
    return (...args) => {
      clearTimeout(timeout);
      timeout = setTimeout(() => func.apply(this, args), delay);
    };
  },
  
  // Deep clone object
  deepClone: (obj) => JSON.parse(JSON.stringify(obj)),
  
  // Check if element is in viewport
  isInViewport: (element) => {
    const rect = element.getBoundingClientRect();
    return (
      rect.top >= 0 &&
      rect.left >= 0 &&
      rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
      rect.right <= (window.innerWidth || document.documentElement.clientWidth)
    );
  }
};

// Array operations
const arrayOps = {
  shuffle: (array) => array.sort(() => Math.random() - 0.5),
  chunk: (array, size) => Array.from(
    { length: Math.ceil(array.length / size) },
    (_, i) => array.slice(i * size, i * size + size)
  ),
  unique: (array) => [...new Set(array)]
};

// Date helpers
const dateHelpers = {
  formatDate: (date = new Date()) => date.toLocaleDateString(),
  addDays: (date, days) => new Date(date.getTime() + days * 86400000),
  isWeekend: (date) => [0, 6].includes(date.getDay())
};

// DOM utilities
const domUtils = {
  createElement: (tag, attributes = {}, text = '') => {
    const el = document.createElement(tag);
    Object.assign(el, attributes);
    if (text) el.textContent = text;
    return el;
  },
  
  toggleClass: (element, className) => element.classList.toggle(className),
  
  observeElement: (element, callback, options = {}) => {
    const observer = new IntersectionObserver(callback, options);
    observer.observe(element);
    return observer;
  }
};

// Example usage
console.log('Random number:', utils.random(1, 100));
console.log('Formatted currency:', utils.formatCurrency(1234.56));
console.log('Unique array:', arrayOps.unique([1, 2, 2, 3, 4, 4]));
console.log('Today:', dateHelpers.formatDate());
</script>
<script>
try{
  window.addEventListener('message', function(e){
    if(e && e.data === 'surfers:reload'){ location.reload(); }
  });
  if (window.parent) {
    window.parent.postMessage({type:'surfers:ready'}, '*');
  }
  window.addEventListener('error', function(e){
    try { window.parent && window.parent.postMessage({type:'surfers:error', msg: String(e.error||e.message) }, '*'); } catch(e){}
  });
} catch(e){}
</script>
</body></html>